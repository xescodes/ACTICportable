<!DOCTYPE html>
<html lang="ca">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Test ACTIC</title>
  <!-- CSS intern -->
  <style>
    body {
      font-family: Arial, sans-serif;
      background-color: #f4f4f9;
      margin: 0;
      padding: 20px;
    }
    h1 {
      text-align: center;
      color: #333;
    }
    .container {
      max-width: 600px;
      margin: auto;
      background: #fff;
      padding: 20px;
      border-radius: 8px;
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    }
    .question {
      margin-bottom: 20px;
    }
    button {
      display: block;
      width: 100%;
      padding: 10px;
      background-color: #007bff;
      color: white;
      border: none;
      border-radius: 5px;
      cursor: pointer;
    }
    button:hover {
      background-color: #0056b3;
    }
    .results {
      margin-top: 20px;
      font-size: 18px;
    }
  </style>
</head>
<body>
  <h1>Test ACTIC</h1>
  <div class="container">
    <div id="config-container">
      <label for="num-questions">Quantes preguntes vols en el test? (Màxim: 6)</label>
      <input type="number" id="num-questions" min="1" max="6" value="6">
      <button id="start-btn">Comença el Test</button>
    </div>
    <div id="test-container" style="display: none;"></div>
    <button id="submit-btn" style="display: none;">Enviar Test</button>
    <div id="results" class="results"></div>
  </div>

  <!-- JavaScript intern -->
  <script>
    // Base de dades de preguntes ampliada
    const preguntes = [
      {
        enunciat: "Què és un full de càlcul?",
        opcions: ["a) Un programa per escriure textos.", "b) Un programa per organitzar i analitzar dades.", "c) Un programa per crear presentacions."],
        correcta: "b",
        explicacio: "Un full de càlcul és una eina dissenyada per organitzar, analitzar i realitzar càlculs amb dades numèriques [[6]]."
      },
      {
        enunciat: "Quina fórmula utilitzaries per calcular la suma del rang A1:A10 en Excel?",
        opcions: ["a) =SUMA(A1:A10)", "b) =MITJANA(A1:A10)", "c) =MAX(A1:A10)"],
        correcta: "a",
        explicacio: "La funció =SUMA(A1:A10) s'utilitza per sumar tots els valors dins del rang especificat [[6]]."
      },
      {
        enunciat: "Quin element NO és adequat per incloure en una diapositiva de presentació?",
        opcions: ["a) Una imatge rellevant.", "b) Un títol clar.", "c) Un bloc de text molt llarg."],
        correcta: "c",
        explicacio: "Les diapositives han de ser visuals i concises. Incloure blocs de text massa llargs pot distreure l'audiència [[10]]."
      },
      {
        enunciat: "Quina és la funció principal d'un processador de textos?",
        opcions: ["a) Crear i editar documents escrits.", "b) Realitzar càlculs matemàtics.", "c) Dissenyar presentacions visuals."],
        correcta: "a",
        explicacio: "Un processador de textos s'utilitza principalment per crear, editar i formatar documents escrits [[1]]."
      },
      {
        enunciat: "Què és un gràfic de barres en un full de càlcul?",
        opcions: ["a) Una representació visual de dades numèriques mitjançant barres.", "b) Un diagrama que mostra connexions entre diferents elements.", "c) Una taula que conté només valors numèrics."],
        correcta: "a",
        explicacio: "Un gràfic de barres és una eina visual que ajuda a comparar dades numèriques utilitzant barres de diferents alçades o longituds [[6]]."
      },
      {
        enunciat: "Quin és l'objectiu principal d'una presentació efectiva?",
        opcions: ["a) Incloure el màxim de text possible.", "b) Comunicar idees clares i concises amb suport visual.", "c) Utilitzar molts efectes especials per captar l'atenció."],
        correcta: "b",
        explicacio: "Una presentació efectiva ha de centrar-se en comunicar idees clares i concises, utilitzant imatges, gràfics i text mínim per reforçar el missatge [[10]]."
      }
    ];

    // Funció per generar el test
    function generarTest(numPreguntes) {
      const testContainer = document.getElementById("test-container");
      testContainer.innerHTML = ""; // Neteja el contingut previ

      const preguntesAleatories = preguntes.sort(() => 0.5 - Math.random()).slice(0, numPreguntes);

      preguntesAleatories.forEach((pregunta, index) => {
        const preguntaDiv = document.createElement("div");
        preguntaDiv.className = "question";
        preguntaDiv.innerHTML = `
          <p><strong>${index + 1}. ${pregunta.enunciat}</strong></p>
          ${pregunta.opcions.map(opcio => `
            <label>
              <input type="radio" name="q${index}" value="${opcio[0]}">
              ${opcio}
            </label><br>
          `).join("")}
        `;
        testContainer.appendChild(preguntaDiv);
      });
    }

    // Funció per processar el test
    function processarTest() {
      const resultats = [];
      let puntuacio = 0;

      preguntes.forEach((pregunta, index) => {
        const respostaSeleccionada = document.querySelector(`input[name="q${index}"]:checked`);
        if (respostaSeleccionada) {
          const resposta = respostaSeleccionada.value;
          if (resposta === pregunta.correcta) {
            puntuacio++;
          } else {
            resultats.push({
              enunciat: pregunta.enunciat,
              respostaIncorrecta: resposta,
              respostaCorrecta: pregunta.correcta,
              explicacio: pregunta.explicacio
            });
          }
        }
      });

      mostrarResultats(puntuacio, resultats);
    }

    // Funció per mostrar els resultats
    function mostrarResultats(puntuacio, errors) {
      const resultsDiv = document.getElementById("results");
      resultsDiv.innerHTML = `<p><strong>Puntuació: ${puntuacio}/${preguntes.length}</strong></p>`;

      if (errors.length > 0) {
        resultsDiv.innerHTML += "<p><strong>Errors:</strong></p>";
        errors.forEach(error => {
          resultsDiv.innerHTML += `
            <p><strong>Pregunta:</strong> ${error.enunciat}</p>
            <p><strong>Resposta incorrecta:</strong> ${error.respostaIncorrecta}</p>
            <p><strong>Resposta correcta:</strong> ${error.respostaCorrecta}</p>
            <p><strong>Explicació:</strong> ${error.explicacio}</p>
            <hr>
          `;
        });
      }
    }

    // Events
    document.getElementById("start-btn").addEventListener("click", () => {
      const numPreguntes = parseInt(document.getElementById("num-questions").value, 10);
      if (numPreguntes > 0 && numPreguntes <= preguntes.length) {
        document.getElementById("config-container").style.display = "none";
        document.getElementById("test-container").style.display = "block";
        document.getElementById("submit-btn").style.display = "block";
        generarTest(numPreguntes);
      } else {
        alert(`Si us plau, introdueix un nombre vàlid de preguntes (entre 1 i ${preguntes.length}).`);
      }
    });

    document.getElementById("submit-btn").addEventListener("click", processarTest);
  </script>
</body>
</html>
